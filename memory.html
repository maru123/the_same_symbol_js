<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>Memory</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css" />
    <link rel="stylesheet" type="text/css" href="./memory.css">
  </head>
  <body>
    <h1 id="title">Memory</h1>
    <div id="memory">
      <input id="entry-pairs" type="number" maxlength="4">
      <button type="button" id="set">SET</button>
      <button type="button" id="reset" disabled>RESET</button>
      <p id="failed-count">failedCount</p>
    </div>
        <div id="cards"></div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="./memory.js" charaset="UTF-8"></script>
    <script type="text/javascript">
      setBtn = document.getElementById('set')
      resetBtn = document.getElementById('reset')
      var memory = new Memory();
      var render = new Render
      var openCard = null;
      var openedCards = [];

      setBtn.addEventListener('click',function(){
        memory.deal(document.getElementById("entry-pairs").value);
        setBtn.disabled = true;
        resetBtn.disabled = false;
        render.createSpanElement(memory.cards);
      });
      resetBtn.addEventListener('click',function(){
        memory.cards = [];
        memory.failedCount = 0;
        setBtn.disabled = false;
        resetBtn.disabled = true;
        render.deleteSpanElement(document.getElementById("cards"));
      });
      function checkCards(){
        openedCards.push(openCard);
        if(openedCards.length == 2){
          if(memory.isPairs(openedCards[0],openedCards[1])){
            console.log("ok");
          } else {
            document.getElementById("failed-count").innerHTML = memory.failedCount;
          };
        openedCards = [];
        };
      };
      // ---------------------------------
      // jquery
      // ---------------------------------
      $(function(){
        $(document).on("click","span",function(){
          openCard = $(this).html();
          console.log(this)
          $(this).toggleClass("openedCard");
          checkCards();
        });
      });
    </script>
  </body>
</html>
